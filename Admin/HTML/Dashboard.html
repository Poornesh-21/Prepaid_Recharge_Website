<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: "Inter", sans-serif;
    }
  </style>
</head>
<body class="bg-gray-100">
<!-- Modal for Past Recharges -->
<div id="pastRechargesModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
  <div class="bg-white rounded-lg p-6 w-full max-w-lg">
    <h2 class="text-xl font-bold mb-4">
      Past Recharges for <span id="modalUserName"></span>
    </h2>
    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead>
        <tr class="bg-gray-200 border-b">
          <th class="py-2 px-4">Date</th>
          <th class="py-2 px-4">Amount</th>
          <th class="py-2 px-4">Method</th>
        </tr>
        </thead>
        <tbody>
        <tr class="border-b hover:bg-gray-50">
          <td class="py-2 px-4">Feb 10, 2025</td>
          <td class="py-2 px-4">Rs. 199</td>
          <td class="py-2 px-4">Credit Card</td>
        </tr>
        <tr class="border-b hover:bg-gray-50">
          <td class="py-2 px-4">Jan 25, 2025</td>
          <td class="py-2 px-4">Rs. 249</td>
          <td class="py-2 px-4">UPI</td>
        </tr>
        <tr class="hover:bg-gray-50">
          <td class="py-2 px-4">Jan 10, 2025</td>
          <td class="py-2 px-4">Rs. 99</td>
          <td class="py-2 px-4">Wallet</td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="mt-4 text-right">
      <button onclick="closeModal()" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Close</button>
    </div>
  </div>
</div>

<!-- Layout Container -->
<div class="h-screen flex flex-col md:flex-row">
  <!-- Sidebar -->
  <aside id="sidebar" class="bg-white w-64 p-6 flex flex-col fixed inset-y-0 left-0 transform -translate-x-full md:static md:translate-x-0 transition-transform duration-200 ease-in-out">
    <div class="flex items-center mb-8">
      <span class="text-xl font-bold">Mobi Comm</span>
    </div>
    <nav>
      <ul>
        <li class="mb-4">
          <a class="flex items-center text-blue-600" href="Dashboard.html">
            <i class="fas fa-tachometer-alt mr-3"></i>
            Dashboard
          </a>
        </li>
        <li class="mb-4">
          <a class="flex items-center text-gray-600" href="Plan_Management.html">
            <i class="fas fa-tasks mr-3"></i>
            Plan Management
          </a>
        </li>
        <li class="mb-4">
          <a class="flex items-center text-gray-600" href="User_Management.html">
            <i class="fas fa-user mr-3"></i>
            User Management
          </a>
        </li>
      </ul>
    </nav>
    <div class="mt-auto">
      <a class="flex items-center text-gray-600" href="Login.html">
        <i class="fas fa-sign-out-alt mr-3"></i>
        Log out
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col">
    <!-- Mobile Header -->
    <header class="flex items-center justify-between p-4 bg-white shadow md:hidden">
      <button id="mobile-menu-button" class="p-2">
        <i class="fas fa-bars text-xl"></i>
      </button>
      <h1 class="text-2xl font-semibold">Dashboard</h1>
    </header>

    <!-- Desktop Header -->
    <header class="hidden md:flex items-center justify-between p-6 bg-white shadow">
      <h1 class="text-2xl font-semibold">Dashboard</h1>
      <div class="flex items-center">
        <input class="border rounded-lg px-4 py-2 mr-4" placeholder="Search anything here..." type="text" />
      </div>
    </header>

    <main class="p-6 overflow-auto">
      <!-- Top Cards: Total Users and New Users -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
        <!-- Total Users Card -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between">
          <div>
            <p class="text-gray-500">Total users</p>
            <p class="text-2xl font-bold text-gray-800">6,23,31,411</p>
            <div class="flex items-center text-green-500 text-sm">
              <i class="fas fa-arrow-up mr-1"></i>
              <span>10% more than previous month</span>
            </div>
          </div>
          <div>
            <img alt="Graph showing total users trends" class="h-12" src="https://storage.googleapis.com/a1aa/image/FUJttxumfeteK5hrpVi11ZCTYXauZc62kQS6tiL94ag.jpg" width="50" />
          </div>
        </div>
        <!-- New Users Card -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="bg-purple-500 rounded-full p-3">
              <i class="fas fa-users text-white"></i>
            </div>
            <div>
              <p class="text-gray-500">New users</p>
              <p class="text-2xl font-bold text-gray-800">321</p>
              <div class="flex items-center text-green-500 text-sm">
                <i class="fas fa-arrow-up mr-1"></i>
                <span>10% more than previous month</span>
              </div>
            </div>
          </div>
          <div>
            <img alt="Graph showing new users trends" class="h-12" src="https://storage.googleapis.com/a1aa/image/QLa_2r7JyrbY4mJHHaO7vmXAKFt_esMY38ua-lkhY_U.jpg" width="50" />
          </div>
        </div>
      </div>

      <!-- Recent Recharges Card -->
      <div class="bg-white p-6 rounded-lg shadow mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Recent Recharges</h2>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="bg-blue-100 p-3 rounded-full">
                <i class="fas fa-credit-card text-blue-500"></i>
              </div>
              <div class="ml-4">
                <p class="text-gray-800 font-medium">Credit Card Recharge</p>
                <p class="text-gray-500 text-sm">Feb 20, 2025</p>
              </div>
            </div>
            <p class="text-green-500 font-medium">+ Rs. 199</p>
          </div>
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="bg-red-100 p-3 rounded-full">
                <i class="fas fa-money-check-alt text-red-500"></i>
              </div>
              <div class="ml-4">
                <p class="text-gray-800 font-medium">Debit Card Recharge</p>
                <p class="text-gray-500 text-sm">Feb 20, 2025</p>
              </div>
            </div>
            <p class="text-green-500 font-medium">+ Rs. 249</p>
          </div>
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="bg-green-100 p-3 rounded-full">
                <i class="fas fa-mobile-alt text-green-500"></i>
              </div>
              <div class="ml-4">
                <p class="text-gray-800 font-medium">UPI Recharge</p>
                <p class="text-gray-500 text-sm">Feb 20, 2025</p>
              </div>
            </div>
            <p class="text-green-500 font-medium">+ Rs. 99</p>
          </div>
        </div>
      </div>

      <!-- Overview Section: Recharge Trend with Dropdown -->
      <div class="bg-white rounded-lg shadow-lg p-6 w-full mb-8">
        <div class="flex justify-between items-center mb-6">
          <div class="text-xl font-semibold text-gray-800">Recharge Trend</div>
          <div>
            <select id="trendDropdown" class="border rounded-lg p-2">
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </div>
        </div>
        <div class="w-full">
          <canvas id="overviewChart" class="w-full" style="height:200px; display:block;"></canvas>
        </div>
      </div>

      <!-- Grid: Top Selling Plans & Active Users in India -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Top Selling Plans Table -->
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="text-lg font-bold mb-4">Top Selling Plans</h3>
          <div class="overflow-x-auto">
            <table class="w-full text-left">
              <thead>
              <tr class="bg-green-100">
                <th class="py-2 px-4">SNo</th>
                <th class="py-2 px-4">Plan Name</th>
                <th class="py-2 px-4">Plan Details</th>
                <th class="py-2 px-4">Total Recharges</th>
              </tr>
              </thead>
              <tbody class="divide-y divide-green-300">
              <tr class="hover:bg-green-50">
                <td class="py-2 px-4">1</td>
                <td class="py-2 px-4">Super Saver Plan</td>
                <td class="py-2 px-4">Unlimited calls, 1.5GB/day</td>
                <td class="py-2 px-4">1500</td>
              </tr>
              <tr class="hover:bg-green-50">
                <td class="py-2 px-4">2</td>
                <td class="py-2 px-4">Unlimited Talktime</td>
                <td class="py-2 px-4">Unlimited calls + 2GB/day</td>
                <td class="py-2 px-4">1200</td>
              </tr>
              <tr class="hover:bg-green-50">
                <td class="py-2 px-4">3</td>
                <td class="py-2 px-4">Data Booster</td>
                <td class="py-2 px-4">5GB valid for 28 days</td>
                <td class="py-2 px-4">900</td>
              </tr>
              <tr class="hover:bg-green-50">
                <td class="py-2 px-4">4</td>
                <td class="py-2 px-4">Weekend Special</td>
                <td class="py-2 px-4">Unlimited weekend data</td>
                <td class="py-2 px-4">800</td>
              </tr>
              <tr class="hover:bg-green-50">
                <td class="py-2 px-4">5</td>
                <td class="py-2 px-4">Family Plan</td>
                <td class="py-2 px-4">Shared plan for 4</td>
                <td class="py-2 px-4">700</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Active Users in India -->
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="text-lg font-bold mb-4">Active Users in India</h3>
          <p class="text-2xl font-bold">15,432</p>
          <p class="text-gray-500 mb-4">Total active users in India</p>
          <ul>
            <li class="flex items-center mb-2">
              <div class="bg-red-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-red-600"></i>
              </div>
              <span class="ml-2 flex-1">Maharashtra</span>
              <span class="text-sm text-gray-600">75%</span>
            </li>
            <li class="flex items-center mb-2">
              <div class="bg-yellow-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-yellow-600"></i>
              </div>
              <span class="ml-2 flex-1">Karnataka</span>
              <span class="text-sm text-gray-600">65%</span>
            </li>
            <li class="flex items-center mb-2">
              <div class="bg-green-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-green-600"></i>
              </div>
              <span class="ml-2 flex-1">Delhi</span>
              <span class="text-sm text-gray-600">55%</span>
            </li>
            <li class="flex items-center mb-2">
              <div class="bg-purple-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-purple-600"></i>
              </div>
              <span class="ml-2 flex-1">Tamil Nadu</span>
              <span class="text-sm text-gray-600">60%</span>
            </li>
            <li class="flex items-center mb-2">
              <div class="bg-indigo-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-indigo-600"></i>
              </div>
              <span class="ml-2 flex-1">West Bengal</span>
              <span class="text-sm text-gray-600">50%</span>
            </li>
            <li class="flex items-center mb-2">
              <div class="bg-blue-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-blue-600"></i>
              </div>
              <span class="ml-2 flex-1">Gujarat</span>
              <span class="text-sm text-gray-600">68%</span>
            </li>
            <li class="flex items-center">
              <div class="bg-pink-200 p-2 rounded-full">
                <i class="fas fa-map-marker-alt text-pink-600"></i>
              </div>
              <span class="ml-2 flex-1">Odisha</span>
              <span class="text-sm text-gray-600">58%</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Users with Expiring Plans Table with Pagination -->
      <div class="bg-white p-4 rounded-lg shadow-md mb-8">
        <h3 class="text-lg font-bold mb-4">Users with Expiring Plans (Next 3 Days)</h3>
        <div class="overflow-x-auto rounded-lg border border-gray-300">
          <table class="w-full text-left">
            <thead>
            <tr class="bg-gray-100">
              <th class="py-2 px-4">SNo</th>
              <th class="py-2 px-4">Customer</th>
              <th class="py-2 px-4">Mobile Number</th>
              <th class="py-2 px-4">Plan</th>
              <th class="py-2 px-4">Expiry Date</th>
              <th class="py-2 px-4">Notification</th>
            </tr>
            </thead>
            <tbody id="usersTableBody" class="divide-y divide-gray-300">
            <!-- Rows will be injected dynamically -->
            </tbody>
          </table>
        </div>
        <div class="flex justify-between items-center mt-4">
          <button id="prevBtn" class="px-4 py-2 bg-gray-200 rounded-lg">Previous</button>
          <span id="pageInfo" class="text-gray-500">Page 1 of 10</span>
          <button id="nextBtn" class="px-4 py-2 bg-gray-200 rounded-lg">Next</button>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Scripts -->
<script>
  // Sidebar toggle for mobile screens
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const sidebar = document.getElementById("sidebar");
  mobileMenuButton.addEventListener("click", () => {
    sidebar.classList.toggle("-translate-x-full");
  });

  // Modal functions for past recharges
  function showPastRecharges(userName) {
    document.getElementById("modalUserName").innerText = userName;
    document.getElementById("pastRechargesModal").classList.remove("hidden");
  }
  function closeModal() {
    document.getElementById("pastRechargesModal").classList.add("hidden");
  }

  // Function to simulate sending a reminder
  function sendReminder(event, sno) {
    event.stopPropagation();
    alert("Reminder sent for user " + sno);
  }

  // Recharge Trend Chart Initialization (Bar Chart)
  const ctx = document.getElementById("overviewChart").getContext("2d");
  const overviewChart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
      datasets: [{
        label: "Recharge Trend",
        data: [10000, 12000, 9000, 15000, 13000, 16000],
        backgroundColor: "rgba(74,86,226,0.5)",
        borderColor: "rgba(74,86,226,1)",
        borderWidth: 1,
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: { x: { display: true }, y: { display: true } },
      plugins: { legend: { display: false } }
    },
  });

  // Dropdown for Recharge Trend
  document.getElementById("trendDropdown").addEventListener("change", function (e) {
    const value = e.target.value;
    let newData;
    if (value === "weekly") {
      newData = [10000, 12000, 9000, 15000, 13000, 16000];
    } else if (value === "monthly") {
      newData = [40000, 42000, 39000, 45000, 43000, 46000];
    } else if (value === "yearly") {
      newData = [500000, 520000, 510000, 530000, 525000, 540000];
    }
    overviewChart.data.datasets[0].data = newData;
    overviewChart.update();
  });

  // Pagination for Users with Expiring Plans
  const usersData = [];
  for (let i = 1; i <= 50; i++) {
    usersData.push({
      sno: i,
      customer: "Customer " + i,
      mobile: "98765" + (10000 + i),
      plan: "Rs. " + (100 + i),
      expiryDate: "Feb " + (25 + (i % 5)) + ", 2025"
    });
  }
  const rowsPerPage = 5;
  let currentPage = 1;
  const totalPages = Math.ceil(usersData.length / rowsPerPage);
  function renderUsersTable() {
    const tbody = document.getElementById("usersTableBody");
    tbody.innerHTML = "";
    const startIndex = (currentPage - 1) * rowsPerPage;
    const endIndex = Math.min(startIndex + rowsPerPage, usersData.length);
    for (let i = startIndex; i < endIndex; i++) {
      const user = usersData[i];
      const row = document.createElement("tr");
      row.classList.add("hover:bg-gray-50", "cursor-pointer");
      row.onclick = () => showPastRecharges(user.customer);
      row.innerHTML = `
          <td class="py-2 px-4">${user.sno}</td>
          <td class="py-2 px-4">${user.customer}</td>
          <td class="py-2 px-4">${user.mobile}</td>
          <td class="py-2 px-4">${user.plan}</td>
          <td class="py-2 px-4">${user.expiryDate}</td>
          <td class="py-2 px-4">
            <button class="px-2 py-1 bg-blue-500 text-white rounded" onclick="sendReminder(event, ${user.sno})">
              Send Reminder
            </button>
          </td>
        `;
      tbody.appendChild(row);
    }
    document.getElementById("pageInfo").innerText = "Page " + currentPage + " of " + totalPages;
  }
  document.getElementById("nextBtn").addEventListener("click", () => {
    if (currentPage < totalPages) {
      currentPage++;
      renderUsersTable();
    }
  });
  document.getElementById("prevBtn").addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      renderUsersTable();
    }
  });
  renderUsersTable();
</script>
</body>
</html>
